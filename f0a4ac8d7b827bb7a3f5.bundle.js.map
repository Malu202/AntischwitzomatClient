{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/home/home.html","webpack:///./src/components/rooms/rooms.html","webpack:///./src/environment.js","webpack:///./src/components/rooms/rooms.js","webpack:///./src/main.js","webpack:///./node_modules/route-it/dist/index.js","webpack:///./src/route-resolver.js","webpack:///./src/components/home/home.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","API_URL","environment","api","NOTIFICATION_PUBLIC_KEY","HTMLElement","super","this","innerHTML","querySelector","customElements","define","e","routeResolver","routeRenderer","lastRoute","popStateListener","handlePopState","doRouting","window","location","pathname","document","basePrefix","getAttribute","baseHref","href","addEventListener","removeEventListener","getRoute","Promise","resolve","then","render","substr","length","substring","URL","history","pushState","title","currentRoute","router","div","createElement","ids","id","tempCanvas","weatherStations","gaugePanels","amount","gaugesBlueprint","tempGaugeBlueprint","humGaugeBlueprint","presGaugeBlueprint","parent","classList","tempDiv","humDiv","pressDiv","appendChild","insertBefore","firstChild","gaugePanel","push","addPanels","tempRequest","XMLHttpRequest","onload","data","response","JSON","parse","responseText","WeatherStation","station","undefined","date","Date","time","times","getTime","temps","temperature","hums","humidity","press","pressure","addGaugePanel","getHours","getMinutes","timeLabels","stepSize","timeLabelCount","labelDate","splice","plottableValues","suffixes","createPlot","plottedValue","onclick","open","send","x","y","sf","Plot","xAxisSize","yAxisSize","yAxisLabelMaxDecimals","yAxisMaxLabels","yAxisLabelSuffix","drawGridLineX","drawGridLineY","preferredLabelStepsY","xLabelNames","graphs","type","xHighlight","yHighlight","position","Math","round","random","temp","hum","Gauge","animateValue","createHomeComponent","container","currentComponent","getElementById","run"],"mappings":"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","file":"f0a4ac8d7b827bb7a3f5.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","// Module\nvar code = \"<div class=\\\"mdc-card gauges\\\" id=gauges> <div id=tempGauge></div> <div id=humGauge></div> <div id=presGauge></div> </div> <div id=tempPlot class=mdc-card></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<h1>Configure Me Rooms!</h1>\";\n// Exports\nmodule.exports = code;","let API_URL = \"https://antischwitzomat.glitch.me/\";\n// API_URL = \"http://127.0.0.1:1337/\";\nlet api = `${API_URL}measurements`;\n// api = \"https://antischwitzomat.glitch.me/mockup2\";\n\nexport const environment = {\n    API_URL: API_URL,\n    api: api,\n    API_URL: `${API_URL}notifications`,\n    NOTIFICATION_PUBLIC_KEY: 'BPpC0dcJVJWCBwjKNWPJW4o75bZpfiqUtGAU3Du18npgjqtCDqfWLMbHjIkMQAbDvcuPbP5eLfL9ZDSxilOFq0I'\n};\n","import * as template from \"./rooms.html\";\n\nexport class RoomsComponent extends HTMLElement {\n\n    constructor() {\n        super();\n        this.innerHTML = template;\n    }\n\n    connectedCallback() {\n        this.querySelector(\"h1\");\n\n        // fetch me configured rooms\n    }\n}\n\ncustomElements.define('app-rooms-component', RoomsComponent);","// import \"./lib/gauge.min.js\"\n// import \"./lib/plot.min.js\"\nimport { Router, ContainerRouteRenderer } from \"route-it\"\nimport { RouteResolver } from \"./route-resolver\";\nimport \"./style.scss\";\nimport { environment } from \"./environment\";\n\nlet router = new Router(new RouteResolver(), new ContainerRouteRenderer(document.getElementById(\"content\")));\nrouter.run();\n\n// if ('serviceWorker' in navigator) {\n//     window.addEventListener('load', function () {\n//         navigator.serviceWorker.register('worker.js').then(function (registration) {\n//             // Registration was successful\n//             console.log('ServiceWorker registration successful with scope: ', registration.scope);\n//             setupPushNotifications(registration);\n//         }, function (err) {\n//             // registration failed :(\n//             console.log('ServiceWorker registration failed: ', err);\n//         });\n//     });\n// }\n\n// function setupPushNotifications(serviceWorkerRegistration) {\n//     serviceWorkerRegistration.pushManager.subscribe(\n//         {\n//             userVisibleOnly: true,\n//             applicationServerKey: environment.NOTIFICATION_PUBLIC_KEY\n//         }\n//     ).then(\n//         function (pushSubscription) {\n//             // console.log(pushSubscription.subscriptionId);\n//             // console.log(pushSubscription.endpoint);\n//             console.log(JSON.stringify(pushSubscription));\n//             sendNotificationDetails(pushSubscription);\n//         }, function (error) {\n//             console.log(error);\n//         });\n// }\n\n// function sendNotificationDetails(subscription) {\n//     var xhr = new XMLHttpRequest();\n//     xhr.open(\"POST\", environment.NOTIFICATIONS_URL, true);\n//     xhr.setRequestHeader('Content-Type', 'application/json');\n//     xhr.send(JSON.stringify(subscription));\n// }","class t{constructor(t,e){this.routeResolver=t,this.routeRenderer=e,this.lastRoute=null,this.popStateListener=this.handlePopState.bind(this)}handlePopState(t){this.doRouting(window.location.pathname)}run(){let t=document.querySelector(\"base\");this.basePrefix=t.getAttribute(\"href\"),this.baseHref=t.href,window.addEventListener(\"popstate\",this.popStateListener),this.doRouting(window.location.pathname)}destroy(){window.removeEventListener(\"popstate\",this.popStateListener)}doRouting(t){let e=this.getRoute(t);return Promise.resolve(this.routeResolver.resolve(this.lastRoute,e,this)).then(t=>!!t&&(this.routeRenderer.render(t),this.lastRoute=e,!0))}getRoute(t){let e=t===this.baseHref,n=t.substr(0,this.basePrefix.length)===this.basePrefix;return e?\"/\":n?t.substring(this.basePrefix.length):t}navigate(t,e){let n=new URL(t,this.baseHref);this.doRouting(n.pathname).then(t=>{t&&window.history.pushState({},e||document.title,n.href)})}}class e{constructor(){this.currentComponent=null}render(t){t&&(this.currentComponent&&document.body.removeChild(this.currentComponent),document.body.appendChild(t),this.currentComponent=t)}}class n{constructor(t){this.container=t,this.currentComponent=!1}render(t){t&&(this.currentComponent&&(this.container.innerHTML=\"\"),this.container.appendChild(t),this.currentComponent=!0)}}export{e as BodyChildRouteRenderer,n as ContainerRouteRenderer,t as Router};\n//# sourceMappingURL=index.js.map\n","import { createHomeComponent } from \"./components/home/home\";\nimport { RoomsComponent } from \"./components/rooms/rooms\";\n\nexport class RouteResolver {\n    resolve(lastRoute, currentRoute, router) {\n        switch (currentRoute) {\n            // case \"page1-div\": // route /simple/page1-div\n            //     let div = document.createElement(\"div\");\n            //     ...\n            //     return div;\n            // case \"page2-webcomponent\": // route /page2-webcomponent\n            //     let component = new SomeFancyComponent();\n            //     return component;\n            case \"rooms\":\n                return new RoomsComponent();\n            case \"\":\n                return createHomeComponent();\n            default:\n                return false;\n        }\n    }\n}","import * as template from \"./home.html\";\nimport { environment } from \"../../environment\";\n\nexport function createHomeComponent() {\n    let div = document.createElement(\"div\");\n    div.id = \"dashboard\";\n    div.innerHTML = template;\n\n    var ids = [\"esp\"];\n    ids = [0];\n\n    const log = div.querySelector(\"#output\");\n    const tempCanvas = div.querySelector(\"#tempPlot\");\n\n    const weatherStations = {};\n\n    var gaugePanels = [];\n    addPanels(ids.length);\n\n    const tempRequest = new XMLHttpRequest();\n    tempRequest.onload = onDataReceived;\n    tempRequest.open('get', environment.api);\n    tempRequest.send();\n\n    var plottedValue = 0;\n    function onDataReceived(data) {\n        var response = JSON.parse(this.responseText);\n\n        for (var i = 0; i < ids.length; i++) {\n            weatherStations[ids[i]] = new WeatherStation();\n        }\n        for (var i = 0; i < response.length; i++) {\n            const station = weatherStations[response[i].id];\n            // const station = weatherStations[response[i].sensor_id];\n\n\n            if (station == undefined) continue;\n            const date = (new Date(response[i].time));\n            station.times.push((date.getTime() / 1000));\n            station.temps.push(response[i].temperature);\n            station.hums.push(response[i].humidity);\n            station.press.push(response[i].pressure);\n        }\n        for (var i = ids.length - 1; i >= 0; i--) {\n            weatherStations[ids[i]].addGaugePanel(i);\n        }\n\n        // if (false) return false;\n\n        for (var i = 0; i < response.length; i += (response.length - 1) || 1) {\n            const date = (new Date(response[i].time));\n            const time = date.getHours() + \":\" + date.getMinutes();\n            weatherStations[ids[0]].timeLabels.push(time);\n        }\n\n        const timeLabelCount = 4;\n        const plottedTime = (weatherStations[ids[0]].times[weatherStations[ids[0]].times.length - 1] - weatherStations[ids[0]].times[0]) * 1000;\n        const stepSize = plottedTime / (timeLabelCount - 1);\n        for (var i = 1; i < timeLabelCount - 1; i++) {\n            const labelDate = new Date((weatherStations[ids[0]].times[0] * 1000 + stepSize * i));\n            weatherStations[ids[0]].timeLabels.splice(i, 0, labelDate.getHours() + \":\" + labelDate.getMinutes());\n        }\n\n        var plottableValues = [weatherStations[ids[0]].temps, weatherStations[ids[0]].hums, weatherStations[ids[0]].press];\n        var suffixes = ['° ', '% ', '']\n        createPlot(weatherStations[ids[0]].times, plottableValues[plottedValue], suffixes[plottedValue])\n        tempCanvas.onclick = function () {\n            plottedValue++;\n            if (plottedValue > plottableValues.length - 1) plottedValue = 0;\n            createPlot(weatherStations[ids[0]].times, plottableValues[plottedValue], suffixes[plottedValue])\n        }\n    }\n\n    var plot;\n    function createPlot(x, y, sf) {\n        plot = new Plot(tempCanvas, {\n            xAxisSize: 0.08,\n            yAxisSize: 0.08,\n            // topMargin: 0.05,\n            // rightMargin: 0.05,\n            yAxisLabelMaxDecimals: 0,\n            yAxisMaxLabels: 15,\n            yAxisLabelSuffix: sf,\n            drawGridLineX: false,\n            drawGridLineY: false,\n            preferredLabelStepsY: [1, 2, 5],\n            xLabelNames: weatherStations[ids[0]].timeLabels,\n\n            graphs: [\n                {\n                    type: \"shadow\",\n                    x: x,\n                    y: y,\n                    xHighlight: x,\n                    yHighlight: y\n                }\n            ]\n        });\n    }\n\n\n    function WeatherStation() {\n        this.timeLabels = [];\n        this.times = [];\n        this.temps = [];\n        this.hums = [];\n        this.press = [];\n    }\n\n    WeatherStation.prototype.addGaugePanel = function (position) {\n        const tempDiv = gaugePanels[position][0];\n        const humDiv = gaugePanels[position][1];\n        const pressDiv = gaugePanels[position][2];\n\n        //Just for mockup:\n        if (this.temps[this.temps.length - 1] == undefined) {\n            this.temps[this.temps.length - 1] = Math.round(Math.random() * 35 + 5);\n            this.hums[this.hums.length - 1] = Math.round(Math.random() * 70 + 30);\n            this.press[this.press.length - 1] = Math.round(Math.random() * 15 + 1000);\n        }\n\n        var temp = Math.round(this.temps[this.temps.length - 1]);\n        var hum = Math.round(this.hums[this.hums.length - 1]);\n        var press = Math.round(this.press[this.press.length - 1]);\n\n        const tempGauge = new Gauge(tempDiv, \"\", temp, \"°\", 5, 40, \"#fff\", \"#000\");\n        tempGauge.animateValue(temp, 800)\n        const humGauge = new Gauge(humDiv, \"\", hum, \"%\", 30, 99, \"#fff\", \"#000\");\n        humGauge.animateValue(hum, 800)\n        const pressGauge = new Gauge(pressDiv, \"\", press, \" mbar\", 950, 1050, \"#fff\", \"#000\");\n        pressGauge.animateValue(press, 800);\n    }\n\n    function addPanels(amount) {\n        const gaugesBlueprint = div.querySelector(\"#gauges\");\n        const tempGaugeBlueprint = div.querySelector(\"#tempGauge\");\n        const humGaugeBlueprint = div.querySelector(\"#humGauge\");\n        const presGaugeBlueprint = div.querySelector(\"#presGauge\");\n\n        for (var i = 0; i < amount; i++) {\n            const parent = document.createElement(\"div\");\n            parent.classList = gaugesBlueprint.classList;\n\n            const tempDiv = document.createElement(\"div\");\n            tempDiv.classList = tempGaugeBlueprint.classList;\n            const humDiv = document.createElement(\"div\");\n            humDiv.classList = humGaugeBlueprint.classList;\n            const pressDiv = document.createElement(\"div\");\n            pressDiv.classList = presGaugeBlueprint.classList;\n\n            parent.appendChild(tempDiv);\n            parent.appendChild(humDiv);\n            parent.appendChild(pressDiv);\n            div.insertBefore(parent, div.firstChild);\n\n            const gaugePanel = [tempDiv, humDiv, pressDiv];\n            gaugePanels.push(gaugePanel);\n        }\n    }\n\n    return div;\n}"],"sourceRoot":""}