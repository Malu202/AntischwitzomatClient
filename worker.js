!function(){"use strict";let e={code:"code-e273169cb4bee2b6e78fdad97c9c80f94936e5d3",asset:"asset-v1"},t=[{'revision':null,'url':'/AntischwitzomatClient/9cc1a6285630fa1c0c7a.bundle.js'},{'revision':null,'url':'/AntischwitzomatClient/f0f00b6edeee06228d19.bundle.js'},{'revision':'8e70d7a5d8759bd5dffd404ec5337f16','url':'/AntischwitzomatClient/favicons/android-chrome-192x192.png'},{'revision':'6b08ad33acbdd1445dbc51c24b65987c','url':'/AntischwitzomatClient/favicons/apple-touch-icon.png'},{'revision':'e93da9c54ff6042979af674f7c761160','url':'/AntischwitzomatClient/favicons/browserconfig.xml'},{'revision':'d268e10ad06f3390b2c833055b05d3e4','url':'/AntischwitzomatClient/favicons/favicon-16x16.png'},{'revision':'c013d4ea57fbb3e9194f1970b26db73e','url':'/AntischwitzomatClient/favicons/favicon-32x32.png'},{'revision':'eafd8a2ea1cf24ed4f6025bfefac5c7b','url':'/AntischwitzomatClient/favicons/favicon.ico'},{'revision':'946af3c9a3cfc8f80d9b9bb3774f77f9','url':'/AntischwitzomatClient/favicons/mstile-150x150.png'},{'revision':'0624dcb90f16ed55645f1d524f05a998','url':'/AntischwitzomatClient/favicons/safari-pinned-tab.svg'},{'revision':null,'url':'/AntischwitzomatClient/index.0f09214b32e2cc4c9df1.css'},{'revision':'1b81cfa64ebe79915dbf533c766bae1f','url':'/AntischwitzomatClient/index.html'},{'revision':'ac9fb4059fd015d16a42dc98b386b446','url':'/AntischwitzomatClient/site.webmanifest'}];self.addEventListener("install",(function(n){let i=t.reduce(((e,t)=>(t.url.indexOf("favicons/")>-1?e.asset.push(t.url):e.code.push(t.url),e)),{asset:[],code:[]}),s=[{name:e.code,assets:[...i.code]},{name:e.asset,assets:i.asset}];n.waitUntil((async()=>{let e=s.map((async e=>{let t=await caches.open(e.name);await t.addAll(Array.from(new Set(e.assets)))}));await Promise.all(e)})())})),self.addEventListener("fetch",(function(t){if("navigate"!==t.request.mode)t.respondWith(caches.match(t.request).then((async e=>e||await fetch(t.request))));else{if("GET"!==t.request.method)return;t.respondWith(caches.match("index.html",{cacheName:e.code}).then((e=>e||fetch(t.request))))}})),self.addEventListener("activate",(function(t){console.log("service worker activated"),t.waitUntil((async()=>{let t=await caches.keys(),n=Object.values(e),i=t.filter((e=>n.indexOf(e)<0)).map((async e=>{await caches.delete(e)}));await Promise.all(i)})())})),self.addEventListener("push",(e=>{console.log("got push data"),console.log(e.data.text());const t={body:e.data.text(),icon:"favicons/android-chrome-192x192.png",badge:"favicons/android-chrome-192x192.png"};e.waitUntil(self.registration.showNotification("Antischwitzomat",t))})),self.addEventListener("notificationclick",(e=>{const t=new URL("/AntischwitzomatClient/",location).href;e.notification.close(),e.waitUntil(clients.matchAll().then((e=>{for(let i of e)if(console.log(`comparing client url ${i.url} with ${t}`),(i.url||"").startsWith((n=t).length>1&&"/"==n[n.length-1]?n.substring(0,n.length-1):n))return i.focus();var n;return console.log("opening /AntischwitzomatClient/"),clients.openWindow("/AntischwitzomatClient/")})))})),self.addEventListener("pushsubscriptionchange",(function(e){e.waitUntil(fetch("https://antischwitzomat.glitch.me/pushsubscriptionchange",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({old_endpoint:e.oldSubscription?e.oldSubscription.endpoint:null,new_endpoint:e.newSubscription?e.newSubscription.endpoint:null,new_p256dh:e.newSubscription?e.newSubscription.toJSON().keys.p256dh:null,new_auth:e.newSubscription?e.newSubscription.toJSON().keys.auth:null})}).then((()=>{if(!response.ok)throw Error(response.statusText)})).catch((e=>{})))}))}();
//# sourceMappingURL=worker.js.map