!function(t){function e(e){for(var i,o,n=e[0],a=e[1],r=0,l=[];r<n.length;r++)o=n[r],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&l.push(s[o][0]),s[o]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i]);for(h&&h(e);l.length;)l.shift()()}var i={},s={0:0};function o(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.e=function(t){var e=[],i=s[t];if(0!==i)if(i)e.push(i[2]);else{var n=new Promise((function(e,o){i=s[t]=[e,o]}));e.push(i[2]=n);var a,r=document.createElement("script");r.charset="utf-8",r.timeout=120,o.nc&&r.setAttribute("nonce",o.nc),r.src=function(t){return o.p+""+t+"."+{1:"2a43d71881fc2ea03b61"}[t]+".bundle.js"}(t);var h=new Error;a=function(e){r.onerror=r.onload=null,clearTimeout(l);var i=s[t];if(0!==i){if(i){var o=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;h.message="Loading chunk "+t+" failed.\n("+o+": "+n+")",h.name="ChunkLoadError",h.type=o,h.request=n,i[1](h)}s[t]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:r})}),12e4);r.onerror=r.onload=a,document.head.appendChild(r)}return Promise.all(e)},o.m=t,o.c=i,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(i,s,function(e){return t[e]}.bind(null,s));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/AntischwitzomatClient/",o.oe=function(t){throw console.error(t),t};var n=window.webpackJsonp=window.webpackJsonp||[],a=n.push.bind(n);n.push=e,n=n.slice();for(var r=0;r<n.length;r++)e(n[r]);var h=a;o(o.s=22)}([function(t,e,i){"use strict";i.d(e,"f",(function(){return r})),i.d(e,"k",(function(){return h})),i.d(e,"j",(function(){return l})),i.d(e,"i",(function(){return c})),i.d(e,"d",(function(){return d})),i.d(e,"b",(function(){return u})),i.d(e,"g",(function(){return p})),i.d(e,"c",(function(){return f})),i.d(e,"a",(function(){return m})),i.d(e,"h",(function(){return g})),i.d(e,"e",(function(){return v})),i.d(e,"l",(function(){return b}));var s=i(1);function o(){return"serviceWorker"in navigator?navigator.serviceWorker.getRegistration().then(t=>t.pushManager.getSubscription().then(e=>null!=e?e:t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:s.a.NOTIFICATION_PUBLIC_KEY}).then((function(t){return t}),(function(t){console.log(t)})))):Promise.reject("No serviceworker")}function n(){return window.localStorage.getItem("user_id")}function a(t){return window.localStorage.setItem("user_id",t.user_id),t}function r(){return fetch(s.a.API_URL+"measurements",{headers:{Accept:"application/json"}}).then(t=>t.json())}function h(t,e,i,o){return fetch(s.a.API_URL+"measurements",{body:JSON.stringify({i:t,t:100*e,h:100*i,p:1e4*o}),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(t=>t.text())}function l(){return fetch(s.a.API_URL+"sensors",{headers:{Accept:"application/json"}}).then(t=>t.json())}function c(){return null==n()?Promise.resolve([]):fetch(`${s.a.API_URL}rooms?user_id=${n()}`,{headers:{Accept:"application/json"}}).then(t=>t.json())}function d(t){return fetch(`${s.a.API_URL}rooms?room_id=${t}`,{method:"DELETE",headers:{Accept:"application/json"}}).then(t=>t.text())}function u(t,e,i,o){return fetch(s.a.API_URL+"rooms",{body:JSON.stringify({user_id:n(),name:t,type:e,sensor_id1:i,sensor_id2:o}),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(t=>t.json()).then(a)}function p(){return null==n()?Promise.resolve([]):fetch(`${s.a.API_URL}notifications?user_id=${n()}`,{headers:{Accept:"application/json"}}).then(t=>t.json())}function f(t){return fetch(`${s.a.API_URL}notifications?notification_id=${t}`,{method:"DELETE",headers:{Accept:"application/json"}}).then(t=>t.text())}function m(t,e,i,r,h,l){return o().then(o=>{let c=JSON.parse(JSON.stringify(o));if(console.log(c),"voltage"==l){let t=1024/3.2*2;h=t+.01*h*(1024-t)}return fetch(s.a.API_URL+"notifications",{body:JSON.stringify({user_id:n(),type:r,value:l,room_id1:e,room_id2:i,amount:h,message:t,endpoint:c.endpoint,keys:c.keys}),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(t=>t.json()).then(a)})}function g(t,e){if(null==n())return Promise.resolve([]);let i=`${s.a.API_URL}roomMeasurements?user_id=${n()}&after=${t.toISOString()}`;return e&&(i+="&before="+e.toISOString()),fetch(i,{headers:{Accept:"application/json"}}).then(t=>t.json())}function v(){return null==n()?Promise.resolve([]):fetch(`${s.a.API_URL}currentroommeasurements?user_id=${n()}`,{headers:{Accept:"application/json"}}).then(t=>t.json())}let w=null;async function b(){"granted"!==Notification.permission&&Promise.resolve();let t=n();return null==t?Promise.resolve():(await navigator.serviceWorker.ready,o().then(e=>{let i=JSON.parse(JSON.stringify(e));JSON.stringify(i)!=JSON.stringify(w)?fetch(s.a.API_URL+"pushSubscriptionUpdate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user_id:t,update:i})}).then(t=>t.json()).then(t=>{null==t.error&&(w=i)}):console.log("Push Notification Subscription did not change since App start. Not updating again.")}))}},function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));let s="https://antischwitzomat.glitch.me/";const o={API_URL:s,api:s+"measurements",ROOM_MEASUREMENTS:s+"roommeasurements",NOTIFICATIONS_URL:s+"notifications",NOTIFICATION_PUBLIC_KEY:"BPpC0dcJVJWCBwjKNWPJW4o75bZpfiqUtGAU3Du18npgjqtCDqfWLMbHjIkMQAbDvcuPbP5eLfL9ZDSxilOFq0I"}},function(t,e){t.exports='<div class="mdc-card gaugesCard" id=gaugeCard> <div class="gaugeHeading mdc-typography--headline6" id=heading>Room</div> <div class=gauges id=gauges> <div id=tempGauge></div> <div id=humGauge></div> <div id=presGauge></div> </div> </div> <div id=tempCard class=mdc-card> <div id=plotHeading> <div id=plottedValueLabel class=mdc-typography--headline7>Temperature</div> <div id=plotTimeframeSelection> <div id=previousDay class="material-icons dayNavigationButton">arrow_back_ios_new</div> <div id=currentDayLabel class=mdc-typography--headline7>Today</div> <div id=nextDay class="material-icons dayNavigationButton">arrow_forward_ios</div> </div> </div> <div id=tempPlot></div> </div>'},function(t,e){t.exports='<div id=rooms> </div> <button id=add-room class=mdc-fab aria-label="Raum hinzufügen"> <div class=mdc-fab__ripple></div> <span class="mdc-fab__icon material-icons">add</span> </button>'},function(t,e){t.exports='<div class="mdc-card room"> <div style=display:none id=name-invalid>Namen eingeben!</div> <div class=roomRow> <label>Name:</label> <div class=mdc-text-field> <input id=roomname type=text class=mdc-text-field__input placeholder=Room1> </div> </div> <div class=roomRow> <label>Sensor 1:</label> <div class=select-container> <div class=mdc-select><i class=mdc-select__dropdown-icon></i><select id=sensor1 class="sendung mdc-select__native-control"> </select></div> </div> </div> <div class=roomRow> <label>Sensor 2 (Optional):</label> <div class=select-container> <div class=mdc-select><i class=mdc-select__dropdown-icon></i><select id=sensor2 class="sendung mdc-select__native-control"> </select></div> </div> </div> <div class=roomRow> <label>Type</label> <div class=select-container> <div class=mdc-select><i class=mdc-select__dropdown-icon></i><select id=type class="sendung mdc-select__native-control"> <option>Average</option> <option>Maximum</option> <option>Minimum</option> </select></div> </div> </div> <div class=roomRow> <div> <button id=remove class="mdc-icon-button material-icons mdc-top-app-bar__action-item--unbounded">delete</button> </div> <div> <button id=save class="mdc-icon-button material-icons mdc-top-app-bar__action-item--unbounded">save</button> </div> </div> </div>'},function(t,e){t.exports='<div id=notifications> </div> <button id=add-notification class=mdc-fab aria-label="Raum hinzufügen"> <div class=mdc-fab__ripple></div> <span class="mdc-fab__icon material-icons">add</span> </button>'},function(t,e){t.exports='<div class="mdc-card room"> <div style=display:none id=name-invalid>Text eingeben!</div> <div class=roomRow> <label>Message:</label> <div class=mdc-text-field> <input id=messageText type=text class=mdc-text-field__input> </div> </div> <div class=roomRow> <label>Value to compare:</label> <div class=select-container> <div class=mdc-select><i class=mdc-select__dropdown-icon></i><select id=value class=mdc-select__native-control> <option>Temperature</option> <option>Humidity</option> <option>Pressure</option> <option value=voltage>Battery</option> </select></div> </div> </div> <div class=roomRow> <label>Room 1:</label> <div class=select-container> <div class=mdc-select><i class=mdc-select__dropdown-icon></i><select id=room1 class=mdc-select__native-control> </select></div> </div> </div> <div class=roomRow> <label>Type</label> <div class=select-container> <div class=mdc-select><i class=mdc-select__dropdown-icon></i><select id=type class="sendung mdc-select__native-control"> <option>Greater than</option> <option>Less than</option> <option>Falling more than</option> <option>Rising more than</option> </select></div> </div> </div> <div class=roomRow> <label>Room 2 (Optional):</label> <div class=select-container> <div class=mdc-select><i class=mdc-select__dropdown-icon></i><select id=room2 class="sendung mdc-select__native-control"> </select></div> </div> </div> <div class=roomRow> <label>Value:</label> <div class=mdc-text-field> <input id=amount type=number step=0.5 value=0 class=mdc-text-field__input> </div> </div> <div class=roomRow> <div> <button id=remove class="mdc-icon-button material-icons mdc-top-app-bar__action-item--unbounded">delete</button> </div> <div> <button id=save class="mdc-icon-button material-icons mdc-top-app-bar__action-item--unbounded">save</button> </div> </div> </div>'},function(t,e){var i="/AntischwitzomatClient/sw.js";Object.defineProperty(e,"__esModule",{value:!0}),e.default={register:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!navigator.serviceWorker&&navigator.serviceWorker.register(i,t)}},t.exports=e.default},function(t,e){(function(){"use strict";function t(t,e,i,s,o,n,a,r){this.initialize(t,e,i,s,o,n,a,r),window.addEventListener("resize",function(t){this.initialize(this.div,this.prefix,this.value,this.suffix,this.min,this.max,this.background,this.textColor),this.setValue(i)}.bind(this))}window.Gauge=t,t.prototype.initialize=function(t,e,i,s,o,n,a,r){this.doWhenLoaded((function(){this.div=t,this.prefix=e,this.value=i,this.suffix=s,this.min=o,this.max=n,this.background=a,this.textColor=r,this.generateCanvas(t),this.size=this.height<this.width?this.height:this.width,this.min=o,this.max=n,this.canvas.style["background-color"]=a,this.textColor=r}))},t.prototype.generateCanvas=function(t){var e=window.devicePixelRatio||1,i=t.getBoundingClientRect(),s=document.createElement("canvas");this.width=Math.round(i.width),this.height=Math.round(i.height),s.width=this.width*e,s.height=this.height*e,this.ctx=s.getContext("2d"),this.ctx.scale(e,e),t.style.position="relative",t.style.overflow="hidden",t.style.top="0px",t.style.left="0px",s.style.position="absolute",s.style.top="0px",s.style.left="0px",s.style.height=this.height+"px",s.style.width=this.width+"px",t.innerHTML="",t.appendChild(s),this.canvas=s},t.prototype.setValue=function(t,i){null==i&&(i=t),this.ctx.clearRect(0,0,this.width,this.height);for(var s=(this.max+"").length-(i+"").length,o="",n=0;n<s;n++)o=" "+o;i=o+this.prefix+i+this.suffix+"",o=200,this.ctx.font="bold "+o+"px monospace, Arial, Helvetica, sans-serif",n=this.ctx.measureText(i).width,s=.9*this.size/2,o=n/o,o=Math.sqrt(s*s/(.25+o*o/4)),o=Math.round(.85*o),this.ctx.font="bold "+o+"px monospace, Arial, Helvetica, sans-serif",this.ctx.fillStyle=this.textColor,this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(i,this.width/2,this.height/2),t=(t-this.min)/(this.max-this.min),this.ctx.beginPath(),this.ctx.lineWidth=.08*this.size,i=new e(0,0,255),s=new e(255,0,0),this.ctx.strokeStyle=i.mix(s,t).rgb(),this.ctx.arc(this.width/2,this.height/2,.9*this.size/2,Math.PI-Math.PI/4,Math.PI/4-(1-t)*(Math.PI+Math.PI/2),!1),this.ctx.stroke()},t.prototype.animateValue=function(t,e){this.doWhenLoaded((function(){this.currentValue=this.min,this.value=t,this.animationTime=e,window.requestAnimationFrame(this.animation.bind(this))}))};function e(t,i,s){this.r=t,this.g=i,this.b=s,this.rgb=function(){return"rgb("+this.r+","+this.g+","+this.b+")"},this.mix=function(t,i){var s=this.r-i*(this.r-t.r),o=this.g-i*(this.g-t.g);return t=this.b-i*(this.b-t.b),new e(s*(i=255/Math.max(s,o,t)),o*i,t*i)}}t.prototype.animation=function(t){if(this.lastTime){var e=t-this.lastTime;this.lastTime=t,this.currentValue+=(this.value-this.min)*e/this.animationTime}else this.firstTime=this.lastTime=t;this.setValue(this.currentValue,this.value),this.currentValue<this.value?window.requestAnimationFrame(this.animation.bind(this)):this.setValue(this.value,this.value)};var i=!1;window.addEventListener("load",(function(){i=!0})),t.prototype.doWhenLoaded=function(t){i?t.bind(this)():window.addEventListener("load",function(){t.bind(this)()}.bind(this))}}).call(this)},function(t,e,i){(function(t){(function(){"use strict";var e=e||{};function i(t,e){this.div=t,this.config=e,this.initialize(t,e),window.addEventListener("resize",function(t){this.initialize(this.div,this.config)}.bind(this))}function s(t,e){return Math.floor(t*Math.pow(10,e))/Math.pow(10,e)}function o(t,e){return Math.ceil(t*Math.pow(10,e))/Math.pow(10,e)}function n(t,e,i,s){for(var o=[],n=0;n<t.length;n++)o[n]=e*(t[n]-i)+s;return o}function a(t,e,i,s,o){for(var n=[],a=0;a<t.length;a++)n[a]=o-e*(t[a]-i)-s;return n}function r(t,e,i,s,o,n){e/=s/=20,i/=s,n.save(),n.font="20px Arial, Helvetica, sans-serif",n.fillStyle=o,n.scale(s,s),n.textAlign="center",n.textBaseline="middle",n.fillText(t,e,i),n.restore()}function h(t,e,i,s,o){o.beginPath(),o.strokeStyle=t,o.lineWidth=1,o.moveTo(e,i),o.lineTo(e+s,i),o.stroke()}function l(t,e,i,s,o){o.beginPath(),o.strokeStyle=t,o.lineWidth=1,o.moveTo(e,i),o.lineTo(e,i-s),o.stroke()}function c(t,e,i,s,o,n,a){for(var r=0;r<t.length;r++)d(t[r],e[r],i,s,o,n,a)}e.scope={},e.ASSUME_ES5=!1,e.ASSUME_NO_NATIVE_MAP=!1,e.ASSUME_NO_NATIVE_SET=!1,e.SIMPLE_FROUND_POLYFILL=!1,e.defineProperty=e.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){t!=Array.prototype&&t!=Object.prototype&&(t[e]=i.value)},e.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:void 0!==t&&null!=t?t:e},e.global=e.getGlobal(this),e.polyfill=function(t,i,s,o){if(i){for(s=e.global,t=t.split("."),o=0;o<t.length-1;o++){var n=t[o];n in s||(s[n]={}),s=s[n]}(i=i(o=s[t=t[t.length-1]]))!=o&&null!=i&&e.defineProperty(s,t,{configurable:!0,writable:!0,value:i})}},e.polyfill("Array.prototype.fill",(function(t){return t||function(t,e,i){var s=this.length||0;for(0>e&&(e=Math.max(0,s+e)),(null==i||i>s)&&(i=s),0>(i=Number(i))&&(i=Math.max(0,s+i)),e=Number(e||0);e<i;e++)this[e]=t;return this}}),"es6","es3"),window.Plot=i,i.prototype.initialize=function(t,e){this.doWhenLoaded((function(){for(var i in this.generateCanvas(t),e)this[i]=e[i];this.applyDefaultSettings(),this.bottomMargin=0,this.ctx=this.canvas.getContext("2d"),this.canvas.style["background-color"]=this.backgroundColor,this.calculateDataRanges(),this.calculateDrawingRanges(),this.calculateDrawingProperties(),this.scaleData(),this.draw()}))},i.prototype.generateCanvas=function(t){var e=window.devicePixelRatio||1,i=t.getBoundingClientRect(),s=document.createElement("canvas");this.width=Math.round(i.width),this.height=Math.round(i.height),s.width=this.width*e,s.height=this.height*e,this.ctx=s.getContext("2d"),this.ctx.scale(e,e),t.style.position="relative",t.style.overflow="hidden",t.style.top="0px",t.style.left="0px",s.style.position="absolute",s.style.top="0px",s.style.left="0px",s.style.height=this.height+"px",s.style.width=this.width+"px",t.innerHTML="",t.appendChild(s),this.canvas=s},i.prototype.applyDefaultSettings=function(){var t,e={backgroundColor:"#4caf50",xAxisSize:.05,yAxisSize:.05,topMargin:.05,rightMargin:.05,xAxisLabelMaxDecimals:2,yAxisLabelMaxDecimals:2,yAxisLabelSuffix:"",yAxisLabelPrefix:"",xAxisLabelSuffix:"",xAxisLabelPrefix:"",xAxisMaxLabels:11,yAxisMaxLabels:15,drawGridLineX:!0,drawGridLineY:!0,preferredLabelStepsX:[1,2,2.5,5],preferredLabelStepsY:[1,2,2.5,5],equalLabelSize:!0},i={type:"line",color:"#fff",linewidth:5,dataPointRadius:4,dataPointLinewidth:2,xHighlight:[],yHighlight:[]},s={color:"#fff",shadowColor:"#80e27e",linewidth:4,dataPointRadius:1.5,xHighlight:[],yHighlight:[]};for(t in e)null==this[t]&&(this[t]=e[t]);for(e=this.graphs.length,t=0;t<e;t++)if("shadow"==this.graphs[t].type)for(var o in s)null==this.graphs[t][o]&&(this.graphs[t][o]=s[o]);else for(o in i)null==this.graphs[t][o]&&(this.graphs[t][o]=i[o])},i.prototype.calculateDataRanges=function(){this.allXData=[],this.allYData=[];for(var t=0;t<this.graphs.length;t++)this.allXData=this.allXData.concat(this.graphs[t].x),this.allXData=this.allXData.concat(this.graphs[t].xHighlight),this.allYData=this.allYData.concat(this.graphs[t].y),this.allYData=this.allYData.concat(this.graphs[t].yHighlight);this.minX=Math.min.apply(null,this.allXData),this.minY=Math.min.apply(null,this.allYData),this.maxX=Math.max.apply(null,this.allXData),this.maxY=Math.max.apply(null,this.allYData),this.xDataRange=this.maxX-this.minX,this.yDataRange=this.maxY-this.minY,this.orderX=.1*m(this.xDataRange),(t=Math.pow(10,-this.xAxisLabelMaxDecimals))>this.orderX&&(this.orderX=t),this.decimalsX=-g(this.orderX),this.orderY=.1*m(this.yDataRange),(t=Math.pow(10,-this.yAxisLabelMaxDecimals))>this.orderY&&(this.orderY=t),this.decimalsY=-g(this.orderY)},i.prototype.calculateDrawingRanges=function(t,e,i,n){this.minPlottingX=null==t?s(Math.min.apply(null,this.allXData),this.decimalsX):t,this.minPlottingY=null==e?s(Math.min.apply(null,this.allYData),this.decimalsY):e,this.maxPlottingX=null==i?o(Math.max.apply(null,this.allXData),this.decimalsX):i,this.maxPlottingY=null==n?o(Math.max.apply(null,this.allYData),this.decimalsY):n,this.xPlottingRange=this.maxPlottingX-this.minPlottingX,this.yPlottingRange=this.maxPlottingY-this.minPlottingY,this.xScaling=this.width/this.xPlottingRange,this.yScaling=this.height/this.yPlottingRange,this.yScaling*=1-(this.topMargin+this.bottomMargin+this.xAxisSize),this.xScaling*=1-this.yAxisSize-this.rightMargin,this.bottomOffset=(this.bottomMargin+this.xAxisSize)*this.height,this.topOffset=this.topMargin*this.height,this.leftOffset=this.yAxisSize*this.width,this.rightOffset=this.rightMargin*this.width,this.bottom=this.height},i.prototype.scaleData=function(){for(var t=0;t<this.graphs.length;t++)this.graphs[t].xCoordinates=n(this.graphs[t].x,this.xScaling,this.minPlottingX,this.leftOffset),this.graphs[t].yCoordinates=a(this.graphs[t].y,this.yScaling,this.minPlottingY,this.bottomOffset,this.bottom),this.graphs[t].xCoordinatesHighlight=n(this.graphs[t].xHighlight,this.xScaling,this.minPlottingX,this.leftOffset),this.graphs[t].yCoordinatesHighlight=a(this.graphs[t].yHighlight,this.yScaling,this.minPlottingY,this.bottomOffset,this.bottom)},i.prototype.calculateLabelHeightYaxis=function(){var t=f(this.maxPlottingY+this.dataStepSizeY,this.yAxisLabelMaxDecimals);isNaN(t)&&!isNaN(this.maxPlottingY+this.dataStepSizeY)&&console.error("To many decimals, or numbers to long, cannot round, try reducing MaxDecimals"),this.longestLabelY=t.toString().length+this.yAxisLabelPrefix.length+this.yAxisLabelSuffix.length,this.labelHeightY=1.5*this.yAxisWidth/this.longestLabelY},i.prototype.calculateDrawingProperties=function(){this.calculateDrawingPropertiesX(),this.calculateDrawingPropertiesY(),this.xLabelNames?(this.gridLineCountX=this.xLabelNames.length,this.drawingStepSizeX=this.xAxisWidth/(this.gridLineCountX-1),this.dataStepSizeX=this.xDataRange/(this.gridLineCountX-1),this.calculateDrawingRanges(null,null,null,null)):this.calculateStepSizeX(),this.calculateStepSizeY()},i.prototype.calculateDrawingPropertiesX=function(){this.xAxisHeight=this.bottomOffset,this.xAxisWidth=this.width-this.leftOffset-this.rightOffset,this.longestLabelX=f(this.maxPlottingX,this.xAxisLabelMaxDecimals).toString().length+this.xAxisLabelPrefix.length+this.xAxisLabelSuffix.length,this.labelHeightX=this.xAxisHeight,this.longestLabelWidthX=this.longestLabelX*this.labelHeightX},i.prototype.calculateDrawingPropertiesY=function(){this.yAxisHeight=this.height-this.topOffset-this.bottomOffset,this.yAxisWidth=this.leftOffset,this.longestLabelY=f(this.maxPlottingY+this.dataStepSizeY,this.yAxisLabelMaxDecimals).toString().length+this.yAxisLabelPrefix.length+this.yAxisLabelSuffix.length},i.prototype.calculateStepSizeX=function(){var t=this.preferredLabelStepsX,e=this.orderX;this.preferredLabelStepsX.forEach((function(i,s){t[s]*=e}));for(var i=0;i<t.length;i++){var s=t[i]-this.maxX%t[i];s==t[i]&&(s=0);var o=this.minX-this.minX%t[i];s=this.maxX+s,this.gridLineCountX=(s-o)/t[i]+1,this.drawingStepSizeX=this.xAxisWidth/(this.gridLineCountX-1),this.dataStepSizeX=t[i];var n=this.drawingStepSizeX<this.longestLabelWidthX;if(!(this.gridLineCountX>this.xAxisMaxLabels||n)){this.calculateDrawingRanges(o,this.minY,s,this.maxY);break}i==t.length-1&&(this.preferredLabelStepsX.forEach((function(e,i){t[i]*=10})),i=-1)}},i.prototype.calculateStepSizeY=function(){var t=this.preferredLabelStepsY,e=this.orderY;this.preferredLabelStepsY.forEach((function(i,s){t[s]*=e}));for(var i=0;i<t.length;i++){var s=t[i]-this.maxY%t[i];s==t[i]&&(s=0);var o=this.minY-this.minY%t[i];s=this.maxY+s,this.gridLineCountY=(s-o)/t[i]+1,this.drawingStepSizeY=this.yAxisHeight/(this.gridLineCountY-1),this.dataStepSizeY=t[i],this.calculateLabelHeightYaxis();var n=this.drawingStepSizeY<this.labelHeightY;if(!(this.gridLineCountY>this.yAxisMaxLabels||n)){this.calculateDrawingRanges(this.minX,o,this.maxX,s);break}i==t.length-1&&(this.preferredLabelStepsY.forEach((function(e,i){t[i]*=10})),i=-1)}},i.prototype.drawAxis=function(){h("#fff",this.leftOffset,this.height-this.bottomOffset,this.width-this.leftOffset-this.rightOffset,this.ctx),l("#fff",this.leftOffset,this.height-this.bottomOffset,this.height-this.topOffset-this.bottomOffset,this.ctx);for(var t=0;t<this.gridLineCountY;t+=1){var e=this.topOffset+this.yAxisHeight-t*this.drawingStepSizeY,i=this.minPlottingY+this.dataStepSizeY*t;i=f(i,this.longestLabelY);var s=this.longestLabelY-i.toString().length-this.yAxisLabelPrefix.length-this.yAxisLabelSuffix.length;s>this.yAxisLabelMaxDecimals&&(s=this.yAxisLabelMaxDecimals),i=v(i,s),r(i=this.yAxisLabelPrefix+i+this.yAxisLabelSuffix,this.yAxisWidth/2,e,this.labelHeightY,"#fff",this.ctx),this.drawGridLineX&&h("#fff",this.leftOffset,e,this.width-this.leftOffset-this.rightOffset,this.ctx)}for(t=0;t<this.gridLineCountX;t+=1)e=this.leftOffset+t*this.drawingStepSizeX,this.xLabelNames?i=this.xLabelNames[t]:(i=f(i=this.minPlottingX+this.dataStepSizeX*t,this.longestLabelX),(s=this.longestLabelX-i.toString().length-this.xAxisLabelPrefix.length-this.xAxisLabelSuffix.length)>this.xAxisLabelMaxDecimals&&(s=this.xAxisLabelMaxDecimals),i=v(i,s)),i=this.xAxisLabelPrefix+i+this.xAxisLabelSuffix,s=this.xAxisHeight/2,this.equalLabelSize&&this.labelHeightX>this.labelHeightY&&(this.labelHeightX=this.labelHeightY),r(i,e,this.height-this.bottomOffset+s,this.labelHeightX,"#fff",this.ctx),this.drawGridLineY&&l("#fff",e,this.height-this.bottomOffset,this.height-this.topOffset-this.bottomOffset,this.ctx)},i.prototype.draw=function(){for(var t=0;t<this.graphs.length;t++)"line"==this.graphs[t].type?(u(this.graphs[t].xCoordinates,this.graphs[t].yCoordinates,this.graphs[t].color,this.graphs[t].linewidth,this.ctx),c(this.graphs[t].xCoordinatesHighlight,this.graphs[t].yCoordinatesHighlight,this.graphs[t].color,this.graphs[t].dataPointRadius,this.graphs[t].dataPointLinewidth,!1,this.ctx)):"shadow"==this.graphs[t].type&&(u(this.graphs[t].xCoordinates,this.graphs[t].yCoordinates,this.graphs[t].color,this.graphs[t].linewidth,this.ctx),c(this.graphs[t].xCoordinatesHighlight,this.graphs[t].yCoordinatesHighlight,this.graphs[t].color,this.graphs[t].dataPointRadius,this.graphs[t].linewidth,!0,this.ctx),p(this.graphs[t].xCoordinates,this.graphs[t].yCoordinates,this.graphs[t].shadowColor,this.bottom-this.bottomOffset,this.ctx));this.drawAxis()};var d=function(t,e,i,s,o,n,a){a.lineWidth=o,a.strokeStyle=i,a.beginPath(),a.arc(t,e,s,0,2*Math.PI,!0),a.fillStyle=n?i:null,a.fill(),a.stroke(),n||(a.strokeStyle="rgb(255, 255, 255)",a.globalCompositeOperation="destination-out",a.fillStyle="rgba(255,255,255,255)",a.lineWidth=1,a.beginPath(),a.arc(t,e,s-o/2,0,2*Math.PI,!0),a.fill(),a.stroke(),a.globalCompositeOperation="source-over")},u=function(t,e,i,s,o){o.lineWidth=s,o.strokeStyle=i;for(var n=0;n<t.length;n++)o.beginPath(),o.moveTo(t[n],e[n]),o.lineTo(t[n+1],e[n+1]),o.stroke();for(o.fillStyle=i,o.linewidth=1,i=Math.ceil(s/2)-1,n=0;n<t.length;n++)o.beginPath(),o.arc(t[n],e[n],i,0,2*Math.PI,!0),o.fill()},p=function(t,e,i,s,o){for(o.globalCompositeOperation="destination-over",o.lineWidth=1,o.strokeStyle=i,o.fillStyle=i,i=0;i<t.length;i++)o.beginPath(),o.moveTo(t[i],e[i]),o.lineTo(t[i],s),o.lineTo(t[i+1],s),o.lineTo(t[i+1],e[i+1]),o.fill(),o.stroke();o.globalCompositeOperation="source-over"};function f(t,e){var i=(t=t.toString()).indexOf("E"),s=t.indexOf("e"),o=0;return-1<s?(o=parseFloat(t.substring(s+1)),t=t.substring(0,s)):-1<i&&(o=parseFloat(t.substring(i+1)),t=t.substring(0,i)),Number(Math.round(t+"e"+(o+e))+"e-"+e)}function m(t){return Math.pow(10,Math.floor(Math.log(Math.abs(t))/Math.LN10+1e-9))}function g(t){return Math.round(Math.log(t)/Math.log(10))}function v(t,e){var i=-1==(t=t.toString()).indexOf(".");if(i&&1==e)return t;for(i&&1<e&&(t+=".",e--),i=0;i<e;i++)t+="0";return t}var w=!1;window.addEventListener("load",(function(){w=!0})),i.prototype.doWhenLoaded=function(t){w?t.bind(this)():window.addEventListener("load",function(){t.bind(this)()}.bind(this))}}).call(this)}).call(this,i(10))},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){},function(t,e,i){const s=i(13);s.keys().forEach(s)},function(t,e,i){var s={"./android-chrome-192x192.png":14,"./apple-touch-icon.png":15,"./browserconfig.xml":16,"./favicon-16x16.png":17,"./favicon-32x32.png":18,"./favicon.ico":19,"./mstile-150x150.png":20,"./safari-pinned-tab.svg":21};function o(t){var e=n(t);return i(e)}function n(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}o.keys=function(){return Object.keys(s)},o.resolve=n,t.exports=o,o.id=13},function(t,e,i){"use strict";i.r(e),e.default=i.p+"favicons/android-chrome-192x192.png"},function(t,e,i){"use strict";i.r(e),e.default=i.p+"favicons/apple-touch-icon.png"},function(t,e,i){"use strict";i.r(e),e.default=i.p+"favicons/browserconfig.xml"},function(t,e,i){"use strict";i.r(e),e.default=i.p+"favicons/favicon-16x16.png"},function(t,e,i){"use strict";i.r(e),e.default=i.p+"favicons/favicon-32x32.png"},function(t,e,i){"use strict";i.r(e),e.default=i.p+"favicons/favicon.ico"},function(t,e,i){"use strict";i.r(e),e.default=i.p+"favicons/mstile-150x150.png"},function(t,e,i){"use strict";i.r(e),e.default=i.p+"favicons/safari-pinned-tab.svg"},function(t,e,i){"use strict";i.r(e);i(8),i(9);var s=i(2),o=(i(1),i(0));function n(t,e,i,s){let o=t,n=e,a=i,r=s;if(!function(t,e,i,s){return!(t<-50||t>50)&&(!(i-t<-30||i-t>70)&&(!(e<.5)&&!(e>17)))}(o,n,a))return null;let h=a-o,l=function(t){let e=t,i=[-2836.5744,-6028.076559,19.54263612,-.02737830188,16261698e-12,7.0229056*Math.pow(10,-10),-1.8680009*Math.pow(10,-13)],s=e+273.15,o=2.7150305*Math.log(s);for(let t=0;t<i.length;t++){o+=i[t]*Math.pow(s,t-2)}return o=.01*Math.exp(o),o}(o)*(r/100)/10;return o+.607562052+-.0227712343*o+8.06470249*Math.pow(10,-4)*o*o+-1.54271372*Math.pow(10,-4)*o*o*o+-3.24651735*Math.pow(10,-6)*o*o*o*o+7.32602852*Math.pow(10,-8)*o*o*o*o*o+1.35959073*Math.pow(10,-9)*o*o*o*o*o*o+-2.2583652*n+.0880326035*o*n+.00216844454*o*o*n+-1.53347087*Math.pow(10,-5)*o*o*o*n+-5.72983704*Math.pow(10,-7)*o*o*o*o*n+-2.55090145*Math.pow(10,-9)*o*o*o*o*o*n+-.751269505*n*n+-.00408350271*o*n*n+-5.21670675*Math.pow(10,-5)*o*o*n*n+1.94544667*Math.pow(10,-6)*o*o*o*n*n+1.14099531*Math.pow(10,-8)*o*o*o*o*n*n+.158137256*n*n*n+-6.57263143*Math.pow(10,-5)*o*n*n*n+2.22697524*Math.pow(10,-7)*o*o*n*n*n+-4.16117031*Math.pow(10,-8)*o*o*o*n*n*n+-.0127762753*n*n*n*n+9.66891875*Math.pow(10,-6)*o*n*n*n*n+2.52785852*Math.pow(10,-9)*o*o*n*n*n*n+4.56306672*Math.pow(10,-4)*n*n*n*n*n+-1.74202546*Math.pow(10,-7)*o*n*n*n*n*n+-5.91491269*Math.pow(10,-6)*n*n*n*n*n*n+.398374029*h+1.83945314*Math.pow(10,-4)*o*h+-1.7375451*Math.pow(10,-4)*o*o*h+-7.60781159*Math.pow(10,-7)*o*o*o*h+3.77830287*Math.pow(10,-8)*o*o*o*o*h+5.43079673*Math.pow(10,-10)*o*o*o*o*o*h+-.0200518269*n*h+8.92859837*Math.pow(10,-4)*o*n*h+3.45433048*Math.pow(10,-6)*o*o*n*h+-3.77925774*Math.pow(10,-7)*o*o*o*n*h+-1.69699377*Math.pow(10,-9)*o*o*o*o*n*h+1.69992415*Math.pow(10,-4)*n*n*h+-4.99204314*Math.pow(10,-5)*o*n*n*h+2.47417178*Math.pow(10,-7)*o*o*n*n*h+1.07596466*Math.pow(10,-8)*o*o*o*n*n*h+8.49242932*Math.pow(10,-5)*n*n*n*h+1.35191328*Math.pow(10,-6)*o*n*n*n*h+-6.21531254*Math.pow(10,-9)*o*o*n*n*n*h+-4.99410301*Math.pow(10,-6)*n*n*n*n*h+-1.89489258*Math.pow(10,-8)*o*n*n*n*n*h+8.15300114*Math.pow(10,-8)*n*n*n*n*n*h+7.5504309*Math.pow(10,-4)*h*h+-5.65095215*Math.pow(10,-5)*o*h*h+-4.52166564*Math.pow(10,-7)*o*o*h*h+2.46688878*Math.pow(10,-8)*o*o*o*h*h+2.42674348*Math.pow(10,-10)*o*o*o*o*h*h+1.5454725*Math.pow(10,-4)*n*h*h+5.2411097*Math.pow(10,-6)*o*n*h*h+-8.75874982*Math.pow(10,-8)*o*o*n*h*h+-1.50743064*Math.pow(10,-9)*o*o*o*n*h*h+-1.56236307*Math.pow(10,-5)*n*n*h*h+-1.33895614*Math.pow(10,-7)*o*n*n*h*h+2.49709824*Math.pow(10,-9)*o*o*n*n*h*h+6.51711721*Math.pow(10,-7)*n*n*n*h*h+1.94960053*Math.pow(10,-9)*o*n*n*n*h*h+-1.00361113*Math.pow(10,-8)*n*n*n*n*h*h+-1.21206673*Math.pow(10,-5)*h*h*h+-2.1820366*Math.pow(10,-7)*o*h*h*h+7.51269482*Math.pow(10,-9)*o*o*h*h*h+9.79063848*Math.pow(10,-11)*o*o*o*h*h*h+1.25006734*Math.pow(10,-6)*n*h*h*h+-1.81584736*Math.pow(10,-9)*o*n*h*h*h+-3.52197671*Math.pow(10,-10)*o*o*n*h*h*h+-3.3651463*Math.pow(10,-8)*n*n*h*h*h+1.35908359*Math.pow(10,-10)*o*n*n*h*h*h+4.1703262*Math.pow(10,-10)*n*n*n*h*h*h+-1.30369025*Math.pow(10,-9)*h*h*h*h+4.13908461*Math.pow(10,-10)*o*h*h*h*h+9.22652254*Math.pow(10,-12)*o*o*h*h*h*h+-5.08220384*Math.pow(10,-9)*n*h*h*h*h+-2.24730961*Math.pow(10,-11)*o*n*h*h*h*h+1.17139133*Math.pow(10,-10)*n*n*h*h*h*h+6.62154879*Math.pow(10,-10)*h*h*h*h*h+4.0386326*Math.pow(10,-13)*o*h*h*h*h*h+1.95087203*Math.pow(10,-12)*n*h*h*h*h*h+-4.73602469*Math.pow(10,-12)*h*h*h*h*h*h+5.12733497*l+-.312788561*o*l+-.0196701861*o*o*l+9.9969087*Math.pow(10,-4)*o*o*o*l+9.51738512*Math.pow(10,-6)*o*o*o*o*l+-4.66426341*Math.pow(10,-7)*o*o*o*o*o*l+.548050612*n*l+-.00330552823*o*n*l+-.0016411944*o*o*n*l+-5.16670694*Math.pow(10,-6)*o*o*o*n*l+9.52692432*Math.pow(10,-7)*o*o*o*o*n*l+-.0429223622*n*n*l+.00500845667*o*n*n*l+1.00601257*Math.pow(10,-6)*o*o*n*n*l+-1.81748644*Math.pow(10,-6)*o*o*o*n*n*l+-1.25813502*Math.pow(10,-3)*n*n*n*l+-1.79330391*Math.pow(10,-4)*o*n*n*n*l+2.34994441*Math.pow(10,-6)*o*o*n*n*n*l+1.29735808*Math.pow(10,-4)*n*n*n*n*l+1.2906487*Math.pow(10,-6)*o*n*n*n*n*l+-2.28558686*Math.pow(10,-6)*n*n*n*n*n*l+-.0369476348*h*l+.00162325322*o*h*l+-3.1427968*Math.pow(10,-5)*o*o*h*l+2.59835559*Math.pow(10,-6)*o*o*o*h*l+-4.77136523*Math.pow(10,-8)*o*o*o*o*h*l+8.6420339*Math.pow(10,-3)*n*h*l+-6.87405181*Math.pow(10,-4)*o*n*h*l+-9.13863872*Math.pow(10,-6)*o*o*n*h*l+5.15916806*Math.pow(10,-7)*o*o*o*n*h*l+-3.59217476*Math.pow(10,-5)*n*n*h*l+3.28696511*Math.pow(10,-5)*o*n*n*h*l+-7.10542454*Math.pow(10,-7)*o*o*n*n*h*l+-1.243823*Math.pow(10,-5)*n*n*n*h*l+-7.385844*Math.pow(10,-9)*o*n*n*n*h*l+2.20609296*Math.pow(10,-7)*n*n*n*n*h*l+-7.3246918*Math.pow(10,-4)*h*h*l+-1.87381964*Math.pow(10,-5)*o*h*h*l+4.80925239*Math.pow(10,-6)*o*o*h*h*l+-8.7549204*Math.pow(10,-8)*o*o*o*h*h*l+2.7786293*Math.pow(10,-5)*n*h*h*l+-5.06004592*Math.pow(10,-6)*o*n*h*h*l+1.14325367*Math.pow(10,-7)*o*o*n*h*h*l+2.53016723*Math.pow(10,-6)*n*n*h*h*l+-1.72857035*Math.pow(10,-8)*o*n*n*h*h*l+-3.95079398*Math.pow(10,-8)*n*n*n*h*h*l+-3.59413173*Math.pow(10,-7)*h*h*h*l+7.04388046*Math.pow(10,-7)*o*h*h*h*l+-1.89309167*Math.pow(10,-8)*o*o*h*h*h*l+-4.79768731*Math.pow(10,-7)*n*h*h*h*l+7.96079978*Math.pow(10,-9)*o*n*h*h*h*l+1.62897058*Math.pow(10,-9)*n*n*h*h*h*l+3.94367674*Math.pow(10,-8)*h*h*h*h*l+-1.18566247*Math.pow(10,-9)*o*h*h*h*h*l+3.34678041*Math.pow(10,-10)*n*h*h*h*h*l+-1.15606447*Math.pow(10,-10)*h*h*h*h*h*l+-2.80626406*l*l+.548712484*o*l*l+-.0039942841*o*o*l*l+-9.54009191*Math.pow(10,-4)*o*o*o*l*l+1.93090978*Math.pow(10,-5)*o*o*o*o*l*l+-.308806365*n*l*l+.0116952364*o*n*l*l+4.95271903*Math.pow(10,-4)*o*o*n*l*l+-1.90710882*Math.pow(10,-5)*o*o*o*n*l*l+.00210787756*n*n*l*l+-6.98445738*Math.pow(10,-4)*o*n*n*l*l+2.30109073*Math.pow(10,-5)*o*o*n*n*l*l+4.1785659*Math.pow(10,-4)*n*n*n*l*l+-1.27043871*Math.pow(10,-5)*o*n*n*n*l*l+-3.04620472*Math.pow(10,-6)*n*n*n*n*l*l+.0514507424*h*l*l+-.00432510997*o*h*l*l+8.99281156*Math.pow(10,-5)*o*o*h*l*l+-7.14663943*Math.pow(10,-7)*o*o*o*h*l*l+-2.66016305*Math.pow(10,-4)*n*h*l*l+2.63789586*Math.pow(10,-4)*o*n*h*l*l+-7.01199003*Math.pow(10,-6)*o*o*n*h*l*l+-1.06823306*Math.pow(10,-4)*n*n*h*l*l+3.61341136*Math.pow(10,-6)*o*n*n*h*l*l+2.29748967*Math.pow(10,-7)*n*n*n*h*l*l+3.04788893*Math.pow(10,-4)*h*h*l*l+-6.42070836*Math.pow(10,-5)*o*h*h*l*l+1.16257971*Math.pow(10,-6)*o*o*h*h*l*l+7.68023384*Math.pow(10,-6)*n*h*h*l*l+-5.47446896*Math.pow(10,-7)*o*n*h*h*l*l+-3.5993791*Math.pow(10,-8)*n*n*h*h*l*l+-4.36497725*Math.pow(10,-6)*h*h*h*l*l+1.68737969*Math.pow(10,-7)*o*h*h*h*l*l+2.67489271*Math.pow(10,-8)*n*h*h*h*l*l+3.23926897*Math.pow(10,-9)*h*h*h*h*l*l+-.0353874123*l*l*l+-.22120119*o*l*l*l+.0155126038*o*o*l*l*l+-2.63917279*Math.pow(10,-4)*o*o*o*l*l*l+.0453433455*n*l*l*l+-.00432943862*o*n*l*l*l+1.45389826*Math.pow(10,-4)*o*o*n*l*l*l+2.1750861*Math.pow(10,-4)*n*n*l*l*l+-6.66724702*Math.pow(10,-5)*o*n*n*l*l*l+3.3321714*Math.pow(10,-5)*n*n*n*l*l*l+-.00226921615*h*l*l*l+3.80261982*Math.pow(10,-4)*o*h*l*l*l+-5.45314314*Math.pow(10,-9)*o*o*h*l*l*l+-7.96355448*Math.pow(10,-4)*n*h*l*l*l+2.53458034*Math.pow(10,-5)*o*n*h*l*l*l+-6.31223658*Math.pow(10,-6)*n*n*h*l*l*l+3.02122035*Math.pow(10,-4)*h*h*l*l*l+-4.77403547*Math.pow(10,-6)*o*h*h*l*l*l+1.73825715*Math.pow(10,-6)*n*h*h*l*l*l+-4.09087898*Math.pow(10,-7)*h*h*h*l*l*l+.614155345*l*l*l*l+-.0616755931*o*l*l*l*l+.00133374846*o*o*l*l*l*l+.00355375387*n*l*l*l*l+-5.13027851*Math.pow(10,-4)*o*n*l*l*l*l+1.02449757*Math.pow(10,-4)*n*n*l*l*l*l+-.00148526421*h*l*l*l*l+-4.11469183*Math.pow(10,-5)*o*h*l*l*l*l+-6.80434415*Math.pow(10,-6)*n*h*l*l*l*l+-9.77675906*Math.pow(10,-6)*h*h*l*l*l*l+.0882773108*l*l*l*l*l+-.00301859306*o*l*l*l*l*l+.00104452989*n*l*l*l*l*l+2.47090539*Math.pow(10,-4)*h*l*l*l*l*l+.00148348065*l*l*l*l*l*l}function a(){let t=new Date;return t.setHours(0,0,0),t}const r=new Intl.DateTimeFormat(["de-AT"],{hour:"2-digit",minute:"2-digit"});function h(t){return 0==t?0:null!=t?(t-640)/384*100:null}function l(){let t=document.createElement("div");t.id="dashboard",t.innerHTML=s;t.querySelector("#output");const e=t.querySelector("#tempPlot"),i=t.querySelector("#tempCard"),l=t.querySelector("#plottedValueLabel"),c=t.querySelector("#previousDay"),d=t.querySelector("#nextDay"),u=t.querySelector("#currentDayLabel"),p={};var f=[];let m=[];var g=0;let v=a();function w(){var t,e;t=v,e=a(),t.getFullYear()!==e.getFullYear()||t.getMonth()!==e.getMonth()||t.getDate()!==e.getDate()?u.innerText=v.toLocaleDateString():u.innerText="Today",x(v,b(v,1))}function b(t,e){let i=new Date(t);return new Date(i.setDate(t.getDate()+e))}function x(s,n){Object(o.h)(s,n).then(s=>{let n=Object.keys(s).length;if(m=Object.keys(s),0==n)return;!function(e){if(f.length>0)return t;const i=t.querySelector("#gaugeCard"),s=t.querySelector("#heading"),o=t.querySelector("#gauges"),n=t.querySelector("#tempGauge"),a=t.querySelector("#humGauge"),r=t.querySelector("#presGauge");for(var h=0;h<e;h++){const e=document.createElement("div");e.classList=i.classList;const h=document.createElement("div");h.classList=o.classList;const l=document.createElement("h5");l.classList=s.classList,l.innerText="Room";const c=document.createElement("div");c.classList=n.classList;const d=document.createElement("div");d.classList=a.classList;const u=document.createElement("div");u.classList=r.classList,h.appendChild(c),h.appendChild(d),h.appendChild(u),e.appendChild(l),e.appendChild(h),t.insertBefore(e,t.firstChild);const p=[c,d,u,l];f.push(p)}}(n);for(var a=0;a<n;a++)p[m[a]]=new y;for(var c=0;c<n;c++){const t=p[m[c]];if(null==t)continue;t.name=s[m[c]].name;let e=s[m[c]].measurements;for(a=0;a<e.length;a++){const i=new Date(e[a].time);t.times.push(i.getTime()/1e3),t.temps.push(e[a].temperature),t.hums.push(e[a].humidity),t.press.push(e[a].pressure),t.vol.push(h(e[a].voltage))}}Object(o.e)().then(t=>{for(var e=n-1;e>=0;e--)p[m[e]].addGaugePanel(e,t[m[e]].measurements)});let d=1/0,u=0;for(let t=0;t<n;t++){let e=p[m[t]].times[0],i=p[m[t]].times[p[m[t]].times.length-1];e<d&&(d=e),i>u&&(u=i)}if(d==1/0||0==u)return;const v=1e3*(u-d)/3;let w=[];for(a=0;a<4;a++){const t=new Date(1e3*d+v*a);let e=r.format(new Date(t));w.push(e)}let b=["temps","hums","press","vol"],x=["Temperature","Humidity","Pressure","Voltage"],M=["#4caf50","#0077c2","#9c64a6","#018786"],S=["#80e27e","#42a5f5","#ce93d8","#03DAC6"];var L=["° ","% ","","% "];i.onclick=function(){++g>b.length-1&&(g=0),function(t,i,s,o,n,a,r){let h=[];for(let e=0;e<m.length;e++){let s=t[m[e]];if(null==s[i][0])continue;let o={type:"line",x:s.times,y:s[i],xHighlight:s.times,yHighlight:s[i],shadowColor:a};0==e&&(o.type="shadow"),h.push(o)}e.parentElement.style.background=n,l.innerText=r,new Plot(e,{backgroundColor:n,xAxisSize:.08,yAxisSize:.08,yAxisLabelMaxDecimals:0,yAxisMaxLabels:15,yAxisLabelSuffix:o,drawGridLineX:!1,drawGridLineY:!1,preferredLabelStepsY:[1,2,5],xLabelNames:s,graphs:h})}(p,b[g],w,L[g],M[g],S[g],x[g])},g=b.length-1,i.click()})}function y(){this.timeLabels=[],this.times=[],this.temps=[],this.hums=[],this.press=[],this.vol=[],this.name=""}return x(v),d.addEventListener("click",t=>{v=b(v,1),b(v,1)>new Date&&(d.style.visibility="hidden"),w(),t.stopPropagation()}),c.addEventListener("click",t=>{d.style.visibility="visible",v=b(v,-1),w(),t.stopPropagation()}),y.prototype.addGaugePanel=function(t,e){const i=f[t][0],s=f[t][1],o=f[t][2],a=f[t][3];let r=e.voltage;null!=r&&(r=Math.round(h(r)));var l=e.temperature,c=e.humidity,d=e.pressure;let u=0==r&&null==l&&null==c&&null==d;r=u?r=", <i class='material-icons'>battery_alert</i>Battery empty":null!=r?", <i class='material-icons'>battery_std</i>"+r+"%":"";let p=function(t){return t.toLocaleTimeString().slice(0,-3)}(new Date(e.time));u&&(p=new Date(e.time).toLocaleDateString());let m=n(l,.5,l,c);m=Math.round(10*m)/10,a.innerHTML=this.name+" <span class='mdc-typography--subtitle2 subsensortext'>("+p+r+") utci: "+m+"°C</span",l=null==l?"- ":Math.round(10*l)/10,c=null==c?"- ":Math.round(c),d=null==d?"- ":Math.round(d);let g="";l<10&&l>=0&&(g=" ");new Gauge(i,g,l,"°",-10,40,"#fff","#000").animateValue(l,800);new Gauge(s," ",c,"% ",30,99,"#fff","#000").animateValue(c,800);new Gauge(o,"",d," mb",950,1050,"#fff","#000").animateValue(d,800)},t}var c=i(3),d=i(4);class u extends HTMLElement{constructor(){super(),this.innerHTML=d}connectedCallback(){this.sensor1Select=this.querySelector("#sensor1"),this.sensor2Select=this.querySelector("#sensor2"),this.typeSelect=this.querySelector("#type"),this.removeButton=this.querySelector("#remove"),this.removeButton.addEventListener("click",this.delete.bind(this)),this.saveButton=this.querySelector("#save"),this.saveButton.addEventListener("click",this.save.bind(this)),this.nameInvalid=this.querySelector("#name-invalid"),this.roomname=this.querySelector("#roomname")}save(){let t=this.roomname.value;this.nameInvalid.style.display=t?"none":"block",t&&(this.id||Object(o.b)(t,this.typeSelect.value,parseInt(this.sensor1Select.value),this.sensor2Select.value?parseInt(this.sensor2Select.value):null).then(t=>{this.id=t.room_id}))}delete(){this.id?Object(o.d)(this.id).then(()=>{this.dispatchEvent(new CustomEvent("onremove"))}):this.dispatchEvent(new CustomEvent("onremove"))}setData(t,e,i,s,o){this.id=t,this.roomname.value=e,this.sensor1Select.value=i,this.sensor2Select.value=s,this.typeSelect.value=o}setSensors(t){const e={102:"Kagran",104:"Schlachthausgasse",100:"Wien/Hohe Warte",101:"Wien/Schwechat",103:"Hendl"};for(let i of[{select:this.sensor1Select,required:!0},{select:this.sensor2Select,required:!1}]){if(i.select.innerHTML="",!i.required){let t=document.createElement("option");i.select.appendChild(t)}for(let s of t){let t=document.createElement("option");t.innerText=e[s.sensor_id]||"Sensor "+s.sensor_id,t.value=s.sensor_id,i.select.appendChild(t)}}}}customElements.define("app-room-editor",u);class p extends HTMLElement{constructor(){super(),this.innerHTML=c,this.sensors=[]}connectedCallback(){this.roomsContainer=this.querySelector("#rooms"),this.addRoomButton=this.querySelector("#add-room"),this.addRoomButton.addEventListener("click",()=>this.addRoom()),this.updateSensors(),this.refreshRooms()}refreshRooms(){Object(o.i)().then(t=>{this.roomsContainer.innerHTML="";for(let e of t)this.addRoom(e)})}addRoom(t){let e=new u;this.roomsContainer.appendChild(e),e.setSensors(this.sensors),t&&e.setData(t.room_id,t.name,t.sensor_id1,t.sensor_id2,t.type),e.addEventListener("onremove",()=>{this.roomsContainer.removeChild(e)})}updateSensors(){Object(o.j)().then(t=>{this.sensors=t,this.roomsContainer.querySelectorAll("app-room-editor").forEach(e=>{e.setSensors(t)})})}}customElements.define("app-rooms-component",p);var f=i(5),m=i(6);class g extends HTMLElement{constructor(){super(),this.innerHTML=m}connectedCallback(){this.messagetext=this.querySelector("#messageText"),this.room1Select=this.querySelector("#room1"),this.room2Select=this.querySelector("#room2"),this.typeSelect=this.querySelector("#type"),this.value=this.querySelector("#value"),this.amount=this.querySelector("#amount"),this.removeButton=this.querySelector("#remove"),this.removeButton.addEventListener("click",this.delete.bind(this)),this.saveButton=this.querySelector("#save"),this.saveButton.addEventListener("click",this.save.bind(this)),this.nameInvalid=this.querySelector("#name-invalid")}delete(){this.id?Object(o.c)(this.id).then(()=>{this.dispatchEvent(new CustomEvent("onremove"))}):this.dispatchEvent(new CustomEvent("onremove"))}save(){let t=this.messagetext.value;this.nameInvalid.style.display=t?"none":"block",t&&(this.id||Object(o.a)(t,parseInt(this.room1Select.value),"Fixed Value"!=this.room2Select.value?parseInt(this.room2Select.value):null,this.typeSelect.value,parseFloat(this.amount.value),this.value.value).then(t=>{this.id=t.notification_id}))}delete(){this.id?Object(o.c)(this.id).then(()=>{this.dispatchEvent(new CustomEvent("onremove"))}):this.dispatchEvent(new CustomEvent("onremove"))}setData(t,e,i,s,o,n,a){this.id=t,this.messagetext.value=e,this.room1Select.value=i,this.room2Select.value=s,this.typeSelect.value=n,this.value.value=a,this.amount.value=o}setRooms(t){for(let e of[{room:this.room1Select,required:!0},{room:this.room2Select,required:!1}]){if(e.room.innerHTML="",!e.required){let t=document.createElement("option");t.innerText="Fixed Value",t.value=null,e.room.appendChild(t)}for(let i of t){let t=document.createElement("option");t.innerText=""+i.name,t.value=i.room_id,e.room.appendChild(t)}}}}customElements.define("app-notification-editor",g);class v extends HTMLElement{constructor(){super(),this.innerHTML=f,this.rooms=[]}connectedCallback(){this.notificationsContainer=this.querySelector("#notifications"),this.addNotificationButton=this.querySelector("#add-notification"),this.addNotificationButton.addEventListener("click",()=>this.addNotification()),this.updateRooms(),this.refreshNotifications()}refreshNotifications(){Object(o.g)().then(t=>{this.notificationsContainer.innerHTML="";for(let e of t)this.addNotification(e)})}addNotification(t){let e=new g;this.notificationsContainer.appendChild(e),e.setRooms(this.rooms),t&&e.setData(t.notification_id,t.message,t.room_id1,t.room_id2,t.amount,t.type,t.value),e.addEventListener("onremove",()=>{this.notificationsContainer.removeChild(e)})}updateRooms(){Object(o.i)().then(t=>{this.rooms=t,this.notificationsContainer.querySelectorAll("app-notification-editor").forEach(e=>{e.setRooms(t)})})}}customElements.define("app-notifications-component",v);i(11),i(12),i.p;var w=i(7),b=i.n(w);let x=new class{constructor(t,e){this.routeResolver=t,this.routeRenderer=e,this.lastRoute=null,this.popStateListener=this.handlePopState.bind(this)}handlePopState(t){this.doRouting(window.location.pathname)}run(){let t=document.querySelector("base");this.basePrefix=t.getAttribute("href"),this.baseHref=t.href,window.addEventListener("popstate",this.popStateListener),this.doRouting(window.location.pathname)}destroy(){window.removeEventListener("popstate",this.popStateListener)}doRouting(t){let e=this.getRoute(t);return Promise.resolve(this.routeResolver.resolve(this.lastRoute,e,this)).then(t=>!!t&&(this.routeRenderer.render(t),this.lastRoute=e,!0))}getRoute(t){let e=t===this.baseHref,i=t.substr(0,this.basePrefix.length)===this.basePrefix;return e?"/":i?t.substring(this.basePrefix.length):t}navigate(t,e,i){let s=new URL(t,this.baseHref);this.doRouting(s.pathname).then(t=>{t&&(i?window.history.replaceState({},e||document.title,s.href):window.history.pushState({},e||document.title,s.href))})}}(new class{resolve(t,e,s){switch(e){case"debug":return i.e(1).then(i.bind(null,24)).then((function(t){return new t.DebugComponent}));case"rooms":return new p;case"notifications":return new v;case"":return l();default:return!1}}},new class{constructor(t){this.container=t,this.currentComponent=!1}render(t){t&&(this.currentComponent&&(this.container.innerHTML=""),this.container.appendChild(t),this.currentComponent=!0)}}(document.getElementById("content")));var y,M;let S;function L(){(!S||(new Date).getTime()-S>5e3&&"/"==window.location.pathname)&&(S=(new Date).getTime(),x.navigate("","Antischwitzomat",!0)),Object(o.l)()}x.run(),y=document.querySelectorAll("a"),M=x,y.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),M.navigate(t.getAttribute("href"))})}),document.querySelector("#home-button").addEventListener("click",()=>x.navigate("")),"serviceWorker"in navigator&&window.addEventListener("load",(function(){b.a.register().then((function(t){console.log("ServiceWorker registration successful with scope: ",t.scope)}),(function(t){console.log("ServiceWorker registration failed: ",t)}))})),Object(o.l)(),window.addEventListener("focus",L),document.addEventListener("focus",L)}]);
//# sourceMappingURL=561147dddbf679630f39.bundle.js.map