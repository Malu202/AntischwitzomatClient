{"version":3,"file":"9cc1a6285630fa1c0c7a.bundle.js","mappings":"6LACA,I,SCOA,IAAIA,EAAuB,IAEpB,MAAMC,UAAuBC,YAEhC,WAAAC,GACIC,QACAC,KAAKC,UDbF,ycCcP,CAEA,iBAAAC,GACIF,KAAKG,IAAMH,KAAKI,cAAc,WAC9BJ,KAAKK,KAAOL,KAAKI,cAAc,SAC/BJ,KAAKM,IAAMN,KAAKI,cAAc,QAC9BJ,KAAKO,KAAOP,KAAKI,cAAc,SAC/BJ,KAAKQ,WAAaR,KAAKI,cAAc,SACrCJ,KAAKS,aAAeT,KAAKI,cAAc,WACvCJ,KAAKU,UAAYV,KAAKI,cAAc,cACpCJ,KAAKW,kBAAoBX,KAAKI,cAAc,sBAC5CJ,KAAKY,uBAAyBZ,KAAKI,cAAc,sBACjDJ,KAAKa,UAMLb,KAAKQ,WAAWM,iBAAiB,SAAS,KACtC,IAAIC,EAC4BA,EAAJ,IAAxBf,KAAKU,UAAUM,MAAkB,IAC3BhB,KAAKU,UAAUM,OACzB,QAAgBD,EAAIf,KAAKK,KAAKW,MAC1BhB,KAAKM,IAAIU,MACThB,KAAKO,KAAKS,OAAOC,MAAK,IAClBjB,KAAKa,WAAU,IAE3Bb,KAAKW,kBAAkBG,iBAAiB,SAAS,KAC7CnB,EAAuBuB,IACvBlB,KAAKW,kBAAkBQ,WAAWC,YAAYpB,KAAKW,mBACnDX,KAAKa,SAAS,IAElBb,KAAKY,uBAAuBE,iBAAiB,SAASO,iBAOlCC,UAAUC,cAAcC,mBACpCC,iBAPU,kBACE,CACZC,KAAM,OACNC,KAAM,sCACNC,MAAO,uCAGwB,GAI3C,CAEA,OAAAf,IACI,UAAkBI,MAAKY,IACnB7B,KAAKG,IAAIF,UAAY,GACrB,IAAI6B,EAAQC,SAASC,cAAc,SAEnCF,EAAMG,UAAY,cAClB,IAAIC,EAAQH,SAASC,cAAc,SAC/BG,EAAKJ,SAASC,cAAc,MAChC,IAAII,EAAcpB,IACd,IAAIqB,EAAKN,SAASC,cAAc,MAChCK,EAAGC,UAAYtB,EACfmB,EAAGI,YAAYF,EAAG,EAEtBD,EAAW,QACXA,EAAW,aACXA,EAAW,eACXA,EAAW,YACXA,EAAW,YACXA,EAAW,WACXA,EAAW,WACXF,EAAMK,YAAYJ,GAClB,IAAIK,EAAQT,SAASC,cAAc,SACnCF,EAAMS,YAAYL,GAClBJ,EAAMS,YAAYC,GAClB,IAAIC,EAAkBZ,EAASa,OAAS/C,EACpC8C,EAAkB,IAAGA,EAAkB,GAC3C,IAAK,IAAIE,EAAId,EAASa,OAAS,EAAGC,GAAKF,EAAiBE,IAAK,CACzD,IAAIC,EAAMb,SAASC,cAAc,MACjCQ,EAAMD,YAAYK,GAClB,IAAIC,EAAc7B,IACd,IAAIqB,EAAKN,SAASC,cAAc,MAChCK,EAAGC,UAAYtB,EACf4B,EAAIL,YAAYF,EAAG,EAEvBQ,EAAW,IAAIC,KAAKjB,EAASc,GAAGI,MAAMC,kBACtCH,EAAWhB,EAASc,GAAGjC,WACvBmC,EAAWhB,EAASc,GAAGM,YAAc,MACrCJ,EAAWhB,EAASc,GAAGO,SAAW,KAClCL,EAAWhB,EAASc,GAAGQ,SAAW,QAElC,IAAIC,EAAS,IACa,MAAtBvB,EAASc,GAAGS,SAAgBA,EAASvB,EAASc,GAAGS,OAAS,MAC9DP,EAAWO,GAEX,IAAIC,EAAU,IACa,MAAvBxB,EAASc,GAAGU,UAAiBA,EAAUxB,EAASc,GAAGU,SACvDR,EAAWQ,EACf,CACArD,KAAKG,IAAIoC,YAAYT,EAAM,GAEnC,EAGJwB,eAAeC,OAAO,sBAAuB3D,E","sources":["webpack://antischwitzomatclient/./src/components/debug/debug.html","webpack://antischwitzomatclient/./src/components/debug/debug.js"],"sourcesContent":["// Module\nvar code = \"<div id=\\\"debugTools\\\"> <input id=\\\"temp\\\" type=\\\"text\\\" placeholder=\\\"Temperature in °C\\\"> <input id=\\\"hum\\\" type=\\\"text\\\" placeholder=\\\"Humidity in %\\\"> <input id=\\\"pres\\\" type=\\\"text\\\" placeholder=\\\"Pressure in mbar\\\"> <button id=\\\"send\\\">submit</button> <div> <input type=\\\"text\\\" id=\\\"sensor_id\\\" placeholder=\\\"Sensor Id (optional)\\\"> </div> <div id=\\\"output\\\"></div> <button id=\\\"loadAllLogsButton\\\">load all</button> <button id=\\\"test-notification\\\">Testnotification</button> </div>\";\n// Exports\nexport default code;","import template from \"./debug.html\";\nimport { environment } from \"../../environment\";\nimport {\n    getMeasurements,\n    sendMeasurement,\n    deleteDatabase\n} from \"../../api/api\";\n\nlet measurementLogLength = 500;\n\nexport class DebugComponent extends HTMLElement {\n\n    constructor() {\n        super();\n        this.innerHTML = template;\n    }\n\n    connectedCallback() {\n        this.log = this.querySelector(\"#output\");\n        this.temp = this.querySelector(\"#temp\");\n        this.hum = this.querySelector(\"#hum\");\n        this.pres = this.querySelector(\"#pres\");\n        this.sendButton = this.querySelector(\"#send\");\n        this.deleteButton = this.querySelector(\"#delete\");\n        this.sensor_id = this.querySelector(\"#sensor_id\");\n        this.loadAllLogsButton = this.querySelector(\"#loadAllLogsButton\");\n        this.testNotificationButton = this.querySelector(\"#test-notification\");\n        this.refresh();\n\n        // this.deleteButton.addEventListener(\"click\", () =>\n        //     deleteDatabase().then(() => {\n        //         this.refresh();\n        //     }));\n        this.sendButton.addEventListener(\"click\", () => {\n            let id;\n            if (this.sensor_id.value == \"\") id = \"0\";\n            else id = this.sensor_id.value;\n            sendMeasurement(id, this.temp.value,\n                this.hum.value,\n                this.pres.value).then(() =>\n                    this.refresh());\n        });\n        this.loadAllLogsButton.addEventListener(\"click\", () => {\n            measurementLogLength = Infinity;\n            this.loadAllLogsButton.parentNode.removeChild(this.loadAllLogsButton);\n            this.refresh();\n        });\n        this.testNotificationButton.addEventListener(\"click\", async () => {\n            const title = 'Antischwitzomat';\n            const options = {\n                body: \"Test\",\n                icon: 'favicons/android-chrome-192x192.png',\n                badge: 'favicons/android-chrome-192x192.png'\n            };\n            let reg = await navigator.serviceWorker.getRegistration();\n            reg.showNotification(title,options);\n            // new Notification(title, options);    \n\n        });\n    }\n\n    refresh() {\n        getMeasurements().then(response => {\n            this.log.innerHTML = \"\";\n            var table = document.createElement(\"table\");\n\n            table.className = \"debug-table\";\n            var thead = document.createElement(\"thead\");\n            var hr = document.createElement(\"tr\");\n            let createHead = (value) => {\n                let td = document.createElement(\"td\");\n                td.innerText = value;\n                hr.appendChild(td);\n            };\n            createHead(\"Time\");\n            createHead(\"Sensor ID\");\n            createHead(\"Temperature\");\n            createHead(\"Humidity\");\n            createHead(\"Pressure\");\n            createHead(\"On time\");\n            createHead(\"Battery\");\n            thead.appendChild(hr);\n            var tbody = document.createElement(\"tbody\");\n            table.appendChild(thead);\n            table.appendChild(tbody);\n            let oldestMsgToShow = response.length - measurementLogLength;\n            if (oldestMsgToShow < 0) oldestMsgToShow = 0;\n            for (var i = response.length - 1; i >= oldestMsgToShow; i--) {\n                let row = document.createElement(\"tr\");\n                tbody.appendChild(row);\n                let createCell = (value) => {\n                    let td = document.createElement(\"td\");\n                    td.innerText = value;\n                    row.appendChild(td);\n                };\n                createCell(new Date(response[i].time).toLocaleString());\n                createCell(response[i].sensor_id);\n                createCell(response[i].temperature + \"°C\");\n                createCell(response[i].humidity + \"%\");\n                createCell(response[i].pressure + \"mbar\");\n\n                let ontime = \"-\";\n                if (response[i].ontime != null) ontime = response[i].ontime + \"ms\";\n                createCell(ontime);\n\n                let voltage = \"-\";\n                if (response[i].voltage != null) voltage = response[i].voltage;\n                createCell(voltage);\n            }\n            this.log.appendChild(table);\n        });\n    }\n\n}\ncustomElements.define('app-debug-component', DebugComponent);"],"names":["measurementLogLength","DebugComponent","HTMLElement","constructor","super","this","innerHTML","connectedCallback","log","querySelector","temp","hum","pres","sendButton","deleteButton","sensor_id","loadAllLogsButton","testNotificationButton","refresh","addEventListener","id","value","then","Infinity","parentNode","removeChild","async","navigator","serviceWorker","getRegistration","showNotification","body","icon","badge","response","table","document","createElement","className","thead","hr","createHead","td","innerText","appendChild","tbody","oldestMsgToShow","length","i","row","createCell","Date","time","toLocaleString","temperature","humidity","pressure","ontime","voltage","customElements","define"],"sourceRoot":""}