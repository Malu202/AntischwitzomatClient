"use strict";(self.webpackChunkantischwitzomatclient=self.webpackChunkantischwitzomatclient||[]).push([[707],{707:function(t,e,i){i.r(e),i.d(e,{DebugComponent:function(){return s}}),i(896);var n=i(965);let o=500;class s extends HTMLElement{constructor(){super(),this.innerHTML='<div id="debugTools"> <input id="temp" type="text" placeholder="Temperature in °C"> <input id="hum" type="text" placeholder="Humidity in %"> <input id="pres" type="text" placeholder="Pressure in mbar"> <button id="send">submit</button> <div> <input type="text" id="sensor_id" placeholder="Sensor Id (optional)"> </div> <div id="output"></div> <button id="loadAllLogsButton">load all</button> <button id="test-notification">Testnotification</button> </div>'}connectedCallback(){this.log=this.querySelector("#output"),this.temp=this.querySelector("#temp"),this.hum=this.querySelector("#hum"),this.pres=this.querySelector("#pres"),this.sendButton=this.querySelector("#send"),this.deleteButton=this.querySelector("#delete"),this.sensor_id=this.querySelector("#sensor_id"),this.loadAllLogsButton=this.querySelector("#loadAllLogsButton"),this.testNotificationButton=this.querySelector("#test-notification"),this.refresh(),this.sendButton.addEventListener("click",(()=>{let t;t=""==this.sensor_id.value?"0":this.sensor_id.value,(0,n.$3)(t,this.temp.value,this.hum.value,this.pres.value).then((()=>this.refresh()))})),this.loadAllLogsButton.addEventListener("click",(()=>{o=1/0,this.loadAllLogsButton.parentNode.removeChild(this.loadAllLogsButton),this.refresh()})),this.testNotificationButton.addEventListener("click",(async()=>{(await navigator.serviceWorker.getRegistration()).showNotification("Antischwitzomat",{body:"Test",icon:"favicons/android-chrome-192x192.png",badge:"favicons/android-chrome-192x192.png"})}))}refresh(){(0,n.Kx)().then((t=>{this.log.innerHTML="";var e=document.createElement("table");e.className="debug-table";var i=document.createElement("thead"),n=document.createElement("tr");let s=t=>{let e=document.createElement("td");e.innerText=t,n.appendChild(e)};s("Time"),s("Sensor ID"),s("Temperature"),s("Humidity"),s("Pressure"),s("On time"),s("Battery"),i.appendChild(n);var l=document.createElement("tbody");e.appendChild(i),e.appendChild(l);let r=t.length-o;r<0&&(r=0);for(var d=t.length-1;d>=r;d--){let e=document.createElement("tr");l.appendChild(e);let i=t=>{let i=document.createElement("td");i.innerText=t,e.appendChild(i)};i(new Date(t[d].time).toLocaleString()),i(t[d].sensor_id),i(t[d].temperature+"°C"),i(t[d].humidity+"%"),i(t[d].pressure+"mbar");let n="-";null!=t[d].ontime&&(n=t[d].ontime+"ms"),i(n);let o="-";null!=t[d].voltage&&(o=t[d].voltage),i(o)}this.log.appendChild(e)}))}}customElements.define("app-debug-component",s)}}]);
//# sourceMappingURL=9cc1a6285630fa1c0c7a.bundle.js.map