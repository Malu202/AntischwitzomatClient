!function(e){var t={};function s(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s(s.s=3)}([function(e,t){e.exports='<div class="mdc-card gauges" id=gauges> <div id=tempGauge></div> <div id=humGauge></div> <div id=presGauge></div> </div> <div id=tempPlot class=mdc-card></div>'},function(e,t){e.exports="<h1>Configure Me Rooms!</h1>"},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var n=s(0);let i="https://antischwitzomat.glitch.me/";const r={API_URL:i,api:"https://antischwitzomat.glitch.me/measurements",API_URL:i+"notifications",NOTIFICATION_PUBLIC_KEY:"BPpC0dcJVJWCBwjKNWPJW4o75bZpfiqUtGAU3Du18npgjqtCDqfWLMbHjIkMQAbDvcuPbP5eLfL9ZDSxilOFq0I"};var o=s(1);class a extends HTMLElement{constructor(){super(),this.innerHTML=o}connectedCallback(){this.querySelector("h1")}}customElements.define("app-rooms-component",a);s(2);new class{constructor(e,t){this.routeResolver=e,this.routeRenderer=t,this.lastRoute=null,this.popStateListener=this.handlePopState.bind(this)}handlePopState(e){this.doRouting(window.location.pathname)}run(){let e=document.querySelector("base");this.basePrefix=e.getAttribute("href"),this.baseHref=e.href,window.addEventListener("popstate",this.popStateListener),this.doRouting(window.location.pathname)}destroy(){window.removeEventListener("popstate",this.popStateListener)}doRouting(e){let t=this.getRoute(e);return Promise.resolve(this.routeResolver.resolve(this.lastRoute,t,this)).then(e=>!!e&&(this.routeRenderer.render(e),this.lastRoute=t,!0))}getRoute(e){let t=e===this.baseHref,s=e.substr(0,this.basePrefix.length)===this.basePrefix;return t?"/":s?e.substring(this.basePrefix.length):e}navigate(e,t){let s=new URL(e,this.baseHref);this.doRouting(s.pathname).then(e=>{e&&window.history.pushState({},t||document.title,s.href)})}}(new class{resolve(e,t,s){switch(t){case"rooms":return new a;case"":return function(){let e=document.createElement("div");var t;e.id="dashboard",e.innerHTML=n,t=[0],e.querySelector("#output");const s=e.querySelector("#tempPlot"),i={};var o=[];!function(t){const s=e.querySelector("#gauges"),n=e.querySelector("#tempGauge"),i=e.querySelector("#humGauge"),r=e.querySelector("#presGauge");for(var a=0;a<t;a++){const t=document.createElement("div");t.classList=s.classList;const a=document.createElement("div");a.classList=n.classList;const u=document.createElement("div");u.classList=i.classList;const l=document.createElement("div");l.classList=r.classList,t.appendChild(a),t.appendChild(u),t.appendChild(l),e.insertBefore(t,e.firstChild);const h=[a,u,l];o.push(h)}}(t.length);const a=new XMLHttpRequest;a.onload=function(e){for(var n=JSON.parse(this.responseText),r=0;r<t.length;r++)i[t[r]]=new h;for(r=0;r<n.length;r++){const e=i[n[r].id];if(null==e)continue;const t=new Date(n[r].time);e.times.push(t.getTime()/1e3),e.temps.push(n[r].temperature),e.hums.push(n[r].humidity),e.press.push(n[r].pressure)}for(r=t.length-1;r>=0;r--)i[t[r]].addGaugePanel(r);for(r=0;r<n.length;r+=n.length-1||1){const e=new Date(n[r].time),s=e.getHours()+":"+e.getMinutes();i[t[0]].timeLabels.push(s)}const o=1e3*(i[t[0]].times[i[t[0]].times.length-1]-i[t[0]].times[0])/3;for(r=1;r<3;r++){const e=new Date(1e3*i[t[0]].times[0]+o*r);i[t[0]].timeLabels.splice(r,0,e.getHours()+":"+e.getMinutes())}var a=[i[t[0]].temps,i[t[0]].hums,i[t[0]].press],c=["° ","% ",""];l(i[t[0]].times,a[u],c[u]),s.onclick=function(){++u>a.length-1&&(u=0),l(i[t[0]].times,a[u],c[u])}},a.open("get",r.api),a.send();var u=0;function l(e,n,r){new Plot(s,{xAxisSize:.08,yAxisSize:.08,yAxisLabelMaxDecimals:0,yAxisMaxLabels:15,yAxisLabelSuffix:r,drawGridLineX:!1,drawGridLineY:!1,preferredLabelStepsY:[1,2,5],xLabelNames:i[t[0]].timeLabels,graphs:[{type:"shadow",x:e,y:n,xHighlight:e,yHighlight:n}]})}function h(){this.timeLabels=[],this.times=[],this.temps=[],this.hums=[],this.press=[]}return h.prototype.addGaugePanel=function(e){const t=o[e][0],s=o[e][1],n=o[e][2];null==this.temps[this.temps.length-1]&&(this.temps[this.temps.length-1]=Math.round(35*Math.random()+5),this.hums[this.hums.length-1]=Math.round(70*Math.random()+30),this.press[this.press.length-1]=Math.round(15*Math.random()+1e3));var i=Math.round(this.temps[this.temps.length-1]),r=Math.round(this.hums[this.hums.length-1]),a=Math.round(this.press[this.press.length-1]);new Gauge(t,"",i,"°",5,40,"#fff","#000").animateValue(i,800);new Gauge(s,"",r,"%",30,99,"#fff","#000").animateValue(r,800);new Gauge(n,"",a," mbar",950,1050,"#fff","#000").animateValue(a,800)},e}();default:return!1}}},new class{constructor(e){this.container=e,this.currentComponent=!1}render(e){e&&(this.currentComponent&&(this.container.innerHTML=""),this.container.appendChild(e),this.currentComponent=!0)}}(document.getElementById("content"))).run()}]);
//# sourceMappingURL=f0a4ac8d7b827bb7a3f5.bundle.js.map